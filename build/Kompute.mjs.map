{"version":3,"file":"Kompute.mjs","sources":["../js/core/Vector3D.js","../js/core/Box.js","../js/third-party/Nearby.js","../js/core/World.js"],"sourcesContent":["var Vector3D = function(x, y, z){\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n}\n\nVector3D.prototype.set = function(x, y, z){\n  this.x = x;\n  this.y = y;\n  this.z = z;\n  return this;\n}\n\nVector3D.prototype.multiplyScalar = function(scalar){\n  this.set(this.x * scalar, this.y * scalar, this.z * scalar);\n  return this;\n}\n\nexport { Vector3D };\n","import { Vector3D } from \"./Vector3D\";\n \nvar Box = function(centerPosition, size){\n  this.min = new Vector3D();\n  this.max = new Vector3D();\n\n  this.setFromCenterAndSize(centerPosition, size);\n}\n\n\nBox.prototype.setFromCenterAndSize = function(center, size){\n  size.multiplyScalar(0.5);\n  this.min.set(center.x - size.x, center.y - size.y, center.z - size.z);\n  this.max.set(center.x + size.x, center.y + size.y, center.z + size.z);\n  return this;\n}\n\nexport { Box };\n","var Nearby = function Nearby(width, height, depth, binSize) {\n  this.limitBox = this.createBox(0, 0, 0, width, height, depth);\n  this.binSize = binSize;\n\n  this.bin = new Map();\n\n  this.reusableResultMap = new Map();\n};\n\nNearby.prototype.createBox = function (x, y, z, width, height, depth) {\n  var bb = {};\n\n  bb.containsBox = function (box) {\n    return this.minX <= box.minX && box.maxX <= this.maxX && this.minY <= box.minY && box.maxY <= this.maxY && this.minZ <= box.minZ && box.maxZ <= this.maxZ;\n  };\n\n  bb.setFromCenterAndSize = function (x, y, z, width, height, depth) {\n    var halfWidth = width / 2;\n    var halfHeight = height / 2;\n    var halfDepth = depth / 2;\n\n    this.minX = x - halfWidth;\n    this.maxX = x + halfWidth;\n    this.minY = y - halfHeight;\n    this.maxY = y + halfHeight;\n    this.minZ = z - halfDepth;\n    this.maxZ = z + halfDepth;\n  };\n\n  bb.setFromCenterAndSize(x, y, z, width, height, depth);\n\n  return bb;\n};\n\nNearby.prototype.createObject = function (id, box) {\n  var self = this;\n\n  var obj = {\n    id: id,\n    box: box,\n    binInfo: new Map()\n  };\n\n  return obj;\n};\n\nNearby.prototype.insert = function (obj) {\n  if (!this.limitBox.containsBox(obj.box)) {\n    return;\n  }\n\n  var BIN_SIZE = this.binSize;\n\n  var box = obj.box;\n  var minX = box.minX;\n  var minY = box.minY;\n  var minZ = box.minZ;\n  var maxX = box.maxX;\n  var maxY = box.maxY;\n  var maxZ = box.maxZ;\n\n  var round = Math.round(minX / BIN_SIZE) * BIN_SIZE;\n  var minXLower, minXUpper;\n  if (round <= minX) {\n    minXLower = round;\n    minXUpper = minXLower + BIN_SIZE;\n  } else {\n    minXUpper = round;\n    minXLower = round - BIN_SIZE;\n  }\n\n  round = Math.round(maxX / BIN_SIZE) * BIN_SIZE;\n  var maxXLower, maxXUpper;\n  if (round < maxX) {\n    maxXLower = round;\n    maxXUpper = maxXLower + BIN_SIZE;\n  } else {\n    maxXUpper = round;\n    maxXLower = round - BIN_SIZE;\n  }\n  if (minXLower > maxXLower) {\n    maxXLower = minXLower;\n  }\n\n  round = Math.round(minY / BIN_SIZE) * BIN_SIZE;\n  var minYLower, minYUpper;\n  if (round <= minY) {\n    minYLower = round;\n    minYUpper = minYLower + BIN_SIZE;\n  } else {\n    minYUpper = round;\n    minYLower = round - BIN_SIZE;\n  }\n\n  round = Math.round(maxY / BIN_SIZE) * BIN_SIZE;\n  var maxYLower, maxYUpper;\n  if (round < maxY) {\n    maxYLower = round;\n    maxYUpper = maxYLower + BIN_SIZE;\n  } else {\n    maxYUpper = round;\n    maxYLower = round - BIN_SIZE;\n  }\n  if (minYLower > maxYLower) {\n    maxYLower = minYLower;\n  }\n\n  round = Math.round(minZ / BIN_SIZE) * BIN_SIZE;\n  var minZLower, minZUpper;\n  if (round <= minZ) {\n    minZLower = round;\n    minZUpper = minZLower + BIN_SIZE;\n  } else {\n    minZUpper = round;\n    minZLower = round - BIN_SIZE;\n  }\n\n  round = Math.round(maxZ / BIN_SIZE) * BIN_SIZE;\n  var maxZLower, maxZUpper;\n  if (round < maxZ) {\n    maxZLower = round;\n    maxZUpper = maxZLower + BIN_SIZE;\n  } else {\n    maxZUpper = round;\n    maxZLower = round - BIN_SIZE;\n  }\n  if (minZLower > maxZLower) {\n    maxZLower = minZLower;\n  }\n\n  for (var x = minXLower; x <= maxXLower; x += BIN_SIZE) {\n    for (var y = minYLower; y <= maxYLower; y += BIN_SIZE) {\n      for (var z = minZLower; z <= maxZLower; z += BIN_SIZE) {\n        if (!this.bin.has(x)) {\n          this.bin.set(x, new Map());\n        }\n        if (!this.bin.get(x).has(y)) {\n          this.bin.get(x).set(y, new Map());\n        }\n        if (!this.bin.get(x).get(y).has(z)) {\n          this.bin.get(x).get(y).set(z, new Map());\n        }\n        this.bin.get(x).get(y).get(z).set(obj, true);\n\n        if (!obj.binInfo.has(x)) {\n          obj.binInfo.set(x, new Map());\n        }\n        if (!obj.binInfo.get(x).has(y)) {\n          obj.binInfo.get(x).set(y, new Map());\n        }\n        obj.binInfo.get(x).get(y).set(z, true);\n      }\n    }\n  }\n};\n\nNearby.prototype.query = function (x, y, z) {\n  var BIN_SIZE = this.binSize;\n\n  var rX = Math.round(x / BIN_SIZE) * BIN_SIZE;\n  var rY = Math.round(y / BIN_SIZE) * BIN_SIZE;\n  var rZ = Math.round(z / BIN_SIZE) * BIN_SIZE;\n\n  var minX, maxX;\n  if (rX <= x) {\n    minX = rX;\n    maxX = rX + BIN_SIZE;\n  } else {\n    maxX = rX;\n    minX = rX - BIN_SIZE;\n  }\n  var minY, maxY;\n  if (rY <= y) {\n    minY = rY;\n    maxY = rY + BIN_SIZE;\n  } else {\n    maxY = rY;\n    minY = rY - BIN_SIZE;\n  }\n  var minZ, maxZ;\n  if (rZ <= z) {\n    minZ = rZ;\n    maxZ = rZ + BIN_SIZE;\n  } else {\n    maxZ = rZ;\n    minZ = rZ - BIN_SIZE;\n  }\n\n  var result = this.reusableResultMap;\n  result.clear();\n\n  for (var xDiff = -BIN_SIZE; xDiff <= BIN_SIZE; xDiff += BIN_SIZE) {\n    for (var yDiff = -BIN_SIZE; yDiff <= BIN_SIZE; yDiff += BIN_SIZE) {\n      for (var zDiff = -BIN_SIZE; zDiff <= BIN_SIZE; zDiff += BIN_SIZE) {\n        var keyX = minX + xDiff;\n        var keyY = minY + yDiff;\n        var keyZ = minZ + zDiff;\n        if (this.bin.has(keyX) && this.bin.get(keyX).has(keyY)) {\n          var res = this.bin.get(keyX).get(keyY).get(keyZ);\n          if (res) {\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n              for (var _iterator = res.keys()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var obj = _step.value;\n\n                result.set(obj, true);\n              }\n            } catch (err) {\n              _didIteratorError = true;\n              _iteratorError = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion && _iterator.return) {\n                  _iterator.return();\n                }\n              } finally {\n                if (_didIteratorError) {\n                  throw _iteratorError;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  return result;\n};\n\nNearby.prototype.delete = function (obj) {\n  var binInfo = obj.binInfo;\n\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = binInfo.keys()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var x = _step2.value;\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = binInfo.get(x).keys()[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var y = _step4.value;\n          var _iteratorNormalCompletion5 = true;\n          var _didIteratorError5 = false;\n          var _iteratorError5 = undefined;\n\n          try {\n            for (var _iterator5 = binInfo.get(x).get(y).keys()[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n              var z = _step5.value;\n\n              if (this.bin.has(x) && this.bin.get(x).has(y) && this.bin.get(x).get(y).has(z)) {\n                this.bin.get(x).get(y).get(z).delete(obj);\n                if (this.bin.get(x).get(y).get(z).size == 0) {\n                  this.bin.get(x).get(y).delete(z);\n                }\n                if (this.bin.get(x).get(y).size == 0) {\n                  this.bin.get(x).delete(y);\n                }\n                if (this.bin.get(x).size == 0) {\n                  this.bin.delete(x);\n                }\n              }\n            }\n          } catch (err) {\n            _didIteratorError5 = true;\n            _iteratorError5 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion5 && _iterator5.return) {\n                _iterator5.return();\n              }\n            } finally {\n              if (_didIteratorError5) {\n                throw _iteratorError5;\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = binInfo.keys()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var x = _step3.value;\n\n      binInfo.delete(x);\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n};\n\nNearby.prototype.update = function (obj, x, y, z, width, height, depth) {\n  obj.box.setFromCenterAndSize(x, y, z, width, height, depth);\n\n  this.delete(obj);\n  this.insert(obj);\n};\n\nexport default Nearby;\n","import Nearby from \"../third-party/Nearby\";\n\nvar World = function(width, height, depth, binSize){\n  this.nearby = new Nearby(width, height, depth, binSize);\n}\n\nexport { World };\n"],"names":["Vector3D","x","y","z","prototype","set","multiplyScalar","scalar","Box","centerPosition","size","min","max","setFromCenterAndSize","center","Nearby","width","height","depth","binSize","limitBox","createBox","bin","Map","reusableResultMap","bb","containsBox","box","minX","maxX","minY","maxY","minZ","maxZ","halfWidth","halfHeight","halfDepth","createObject","id","self","obj","insert","BIN_SIZE","round","Math","minXLower","minXUpper","maxXLower","maxXUpper","minYLower","minYUpper","maxYLower","maxYUpper","minZLower","minZUpper","maxZLower","maxZUpper","has","get","binInfo","query","rX","rY","rZ","result","clear","xDiff","yDiff","zDiff","keyX","keyY","keyZ","res","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","keys","Symbol","iterator","_step","next","done","value","err","return","delete","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_step4","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_iterator5","_step5","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","update","World","nearby"],"mappings":"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"}